(this["webpackJsonpjust-a-chat"]=this["webpackJsonpjust-a-chat"]||[]).push([[0],{125:function(n,e){},128:function(n,e,t){},129:function(n,e,t){"use strict";t.r(e);var a=t(0),r=t.n(a),o=t(58),c=t.n(o),i=t(68),u=t(28),l=t.n(u),s=t(59),d=t(4),p=t(9),f=t(3),m=t(6),g=Object(a.createContext)({changeValue:function(){},logged:!1}),h=t(60),b=t.n(h).a.create({baseURL:"http://25.42.11.72:25565/",withCredentials:!0}),x=t(1),v=t(2);function E(){var n=Object(x.a)(["\n    display: flex;\n    flex-direction: row-reverse;\n    align-items: center;\n    height: 40px;\n    position: fixed;\n    top: 0; left: 0;\n    width: 100%;\n    background: #0D0D0D;\n\n    & > button {\n        background: none;\n        border: none;\n        color: white;\n        width: 90px; height: 100%;\n        display: flex;\n        align-items: center;\n        justify-content: space-evenly;\n        cursor: pointer;\n    }\n\n    & section#children {\n        flex: 1;\n        height: 100%;\n        display: flex;\n        align-items: center;\n        justify-content: ",";\n    }\n"]);return E=function(){return n},n}var j=v.a.header(E(),(function(n){return n.justifyContent||"start"})),O=function(n){var e=n.children,t=n.justifyContent,o=Object(f.f)(),c=Object(a.useContext)(g);return r.a.createElement(j,{justifyContent:t},r.a.createElement("button",{onClick:function(){b.delete("/logout").then((function(){c.changeValue({logged:!1,user:void 0}),o.push("/login")})).catch((function(){alert("Ocorreu um erro inesperado, tente novamente.")}))}},r.a.createElement(m.e,null),"Logout"),r.a.createElement("section",{id:"children"},e))};function y(){var n=Object(x.a)(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n\n    & > * {\n        margin: 20px auto;\n    }\n\n    & button {\n        display: flex;\n        align-items: center;\n        border: none;\n        height: 35px;\n        cursor: pointer;\n    }\n\n    & button svg {\n        margin-left: 5px;\n    }\n"]);return y=function(){return n},n}var w=v.a.main(y()),k=function(){var n=Object(f.f)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(O,null),r.a.createElement(w,null,r.a.createElement("h1",null,"Bem-vindo!"),r.a.createElement("span",null,"Conecte-se com pessoas em qualquer lugar. Aproveite nosso app!"),r.a.createElement("button",{onClick:function(){n.push("/chat")}},"Continuar para o app ",r.a.createElement(m.a,null))))};function C(){var n=Object(x.a)(["\n    display: flex;\n    flex-direction: column;\n    justify-content: space-evenly;\n    align-items: center;\n    flex: 0.5;\n    text-align: center;\n    border-left: 1px solid black;\n\n    \n    button {\n        height: 35px;\n        padding: 10px;\n        background: #444;\n        color: white;\n        border: none;\n    }\n"]);return C=function(){return n},n}function S(){var n=Object(x.a)(["\n    display: flex;\n    flex-direction: column;\n    justify-content: space-evenly;\n    align-items: center;\n    flex: 0.5;\n    border-right: 1px solid black;\n    padding: 0 20px;\n\n\n    h1 {\n        margin: 0;\n    }\n\n    .input-block {\n        width: 100%;\n        display: flex;\n        flex-direction: row;\n        justify-content: center;\n    }\n\n    svg {\n        padding: 5px;\n        background: black;\n        border-radius: 4px 0 0 4px;\n    }\n\n    input {\n        height: 25px;\n        border: 1px solid black;\n        border-radius: 0 4px 4px 0; \n        width: 80%;\n        padding: 0 10px;\n    }\n\n    button {\n        height: 35px;\n        padding: 10px 20px;\n        background: #444;\n        color: white;\n        border: none;\n    }\n"]);return S=function(){return n},n}function D(){var n=Object(x.a)(["\n    margin-top: 30px;\n    display: flex;\n    flex-direction: row;\n    height: 30vh; width: 60vw;\n    background: #111;\n    border-radius: 8px;\n"]);return D=function(){return n},n}function z(){var n=Object(x.a)(["\n    text-align: center;\n    font-family: 'Roboto', sans-serif;\n\n    h1 {\n        font-weigth: 500;\n        margin: 0 0 10px;\n    }\n\n    span {\n        font-weigth: 400;\n    }\n"]);return z=function(){return n},n}var U=v.a.header(z()),F=v.a.main(D()),R=v.a.form(S()),N=v.a.section(C()),A=function(){var n=Object(a.useState)(""),e=Object(d.a)(n,2),t=e[0],o=e[1],c=Object(a.useState)(""),i=Object(d.a)(c,2),u=i[0],l=i[1],s=Object(a.useContext)(g),p=Object(f.f)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(U,null,r.a.createElement("h1",null,"Fa\xe7a seu login!"),r.a.createElement("span",null,"Ou junte-se a n\xf3s registrando-se!")),r.a.createElement(F,null,r.a.createElement(R,{onSubmit:function(n){n.preventDefault(),b.post("/auth",{username:t,password:u}).then((function(){null===s||void 0===s||s.changeValue({logged:!0,user:t}),p.push("/")})).catch((function(n){401===n.response.status?alert("Nome de usu\xe1rio n\xe3o encontrado!"):403===n.response.status?alert("Senha incorreta!"):alert("Ocorreu um erro inesperado. Tente novamente mais tarde!")}))}},r.a.createElement("h1",null,"Entre"),r.a.createElement("div",{className:"input-block"},r.a.createElement(m.f,{size:25}),r.a.createElement("input",{type:"text",value:t,onChange:function(n){o(n.target.value)}})),r.a.createElement("div",{className:"input-block"},r.a.createElement(m.c,{size:25}),r.a.createElement("input",{type:"password",value:u,onChange:function(n){l(n.target.value)}})),r.a.createElement("button",{type:"submit"},"Login")),r.a.createElement(N,null,r.a.createElement("h1",null,"Ainda n\xe3o est\xe1 registrado?"),r.a.createElement("span",null,"Fa\xe7a seu cadastro agora mesmo e comece a usar nosso app!"),r.a.createElement("button",{type:"button",onClick:function(){p.push("/signup")}},"Registre-se"))))};function V(){var n=Object(x.a)(["\n    padding: 0 40px;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-evenly;\n    align-items: center;\n    width: 100%;\n    border-radius: 16px;\n\n\n    h1 {\n        margin: 0;\n    }\n\n    .input-block {\n        width: 100%;\n        display: flex;\n        flex-direction: row;\n        justify-content: center;\n    }\n\n    svg {\n        box-sizing: content-box;\n        padding: 5px;\n        height: 15px; width: 15px;\n        background: black;\n        border-radius: 4px 0 0 4px;\n    }\n\n    input {\n        height: 25px;\n        border: 1px solid black;\n        border-radius: 0 4px 4px 0;\n        width: 100%;\n        padding: 0 10px;\n        margin-right: 10px;\n    }\n\n    button {\n        height: 35px;\n        padding: 10px 20px;\n        background: #444;\n        color: white;\n        border: none;\n    }\n"]);return V=function(){return n},n}function J(){var n=Object(x.a)(["\n    margin-top: 30px;\n    padding: 0 40px;\n    display: flex;\n    flex-direction: row;\n    height: 30vh; width: 60vw;\n    background: #111;\n    border-radius: 8px;\n"]);return J=function(){return n},n}function L(){var n=Object(x.a)(["\n    text-align: center;\n    font-family: 'Roboto', sans-serif;\n\n    h1 {\n        font-weigth: 500;\n        margin: 0 0 10px;\n    }\n\n    span {\n        font-weigth: 400;\n    }\n"]);return L=function(){return n},n}var q=v.a.header(L()),B=v.a.main(J()),K=v.a.form(V()),T=function(){var n=Object(f.f)(),e=Object(a.useState)(""),t=Object(d.a)(e,2),o=t[0],c=t[1],i=Object(a.useState)(""),u=Object(d.a)(i,2),l=u[0],s=u[1],p=Object(a.useState)(""),g=Object(d.a)(p,2),h=g[0],x=g[1],v=Object(a.useState)(!1),E=Object(d.a)(v,2),j=E[0],O=E[1],y=Object(a.useState)(!1),w=Object(d.a)(y,2),k=w[0],C=w[1],S=Object(a.useState)(!1),D=Object(d.a)(S,2),z=D[0],U=D[1],F={border:"1px solid red"};return r.a.createElement(r.a.Fragment,null,r.a.createElement(q,null,r.a.createElement("h1",null,"Registre-se no nosso chat online!")),r.a.createElement(B,null,r.a.createElement(K,{onSubmit:function(e){return e.preventDefault(),o?(O(!1),l?l!==h?(C(!0),U(!0),alert("As senhas precisam ser iguais!")):(C(!1),U(!1),void b.post("/signup",{username:o,password:l}).then((function(){alert("Cadastrado com sucesso!"),n.push("/login")})).catch((function(n){400===n.response.status&&alert("Os campos abaixo s\xe3o inv\xe1lidos:\n".concat(JSON.stringify(n.response.data)))}))):(C(!0),alert("A senha \xe9 obrigat\xf3ria!"))):(O(!0),alert("O nome de usu\xe1rio \xe9 obrigat\xf3rio!"))}},r.a.createElement("div",{className:"input-block"},r.a.createElement(m.f,{size:25}),r.a.createElement("input",{type:"text",placeholder:"Nome de usu\xe1rio",value:o,onChange:function(n){c(n.target.value)},style:j?F:{}})),r.a.createElement("div",{className:"input-block"},r.a.createElement(m.b,{size:25}),r.a.createElement("input",{type:"password",placeholder:"Digite uma senha",value:l,onChange:function(n){s(n.target.value)},style:k?F:{}}),r.a.createElement(m.b,{size:25}),r.a.createElement("input",{type:"password",placeholder:"Confirme a senha",value:h,onChange:function(n){x(n.target.value)},style:z?F:{}})),r.a.createElement("button",{type:"submit"},"Cadastrar"))))},W=function(){var n=Object(a.useContext)(g),e=Object(f.f)();return Object(a.useEffect)((function(){!n||n.logged||e.location.pathname.startsWith("/login")||e.location.pathname.startsWith("/signup")||e.replace("/login")})),r.a.createElement(r.a.Fragment,null)},G=t(64),H=t.n(G),I=t(67),M=t(66);function P(){var n=Object(x.a)(["\n    padding: 10px;\n    border-radius: ",";\n    width: max-content;\n    max-width: 50vw;\n    background: ",";\n    align-self: ",";\n    ","\n    margin-bottom: 5px;\n    display: flex;\n    flex-direction: column;\n\n    & header {\n        ","\n        font-size: 80%;\n    }\n\n    & main {\n        \n    }\n"]);return P=function(){return n},n}var Q=v.a.article(P(),(function(n){return n.fromUser?"10px 10px 0 10px":"10px 10px 10px 0"}),(function(n){return n.fromUser?"#DDD":"#333"}),(function(n){return n.fromUser?"flex-end":"start"}),(function(n){return n.fromUser?"color: black;":""}),(function(n){return n.fromUser?"display: none;":""})),X=function(n){return r.a.createElement(Q,n,r.a.createElement("header",null,r.a.createElement("b",null,n.author)," diz:"),r.a.createElement("main",null,n.content))};function Y(){var n=Object(x.a)(["\n    width: 100%;\n    height: fit-content;\n    padding: 20px;\n    border-radius: 10px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    & textarea {\n        display: flex;\n        align-items: center;\n        width: calc(95% - 40px);\n        padding: 8px;\n        border: none;\n        resize: none;\n        overflow: auto;\n        border-radius: 4px 0 0 4px;\n    }\n\n    & button {\n        border: none;\n        width: 40px;\n        height: 100%;\n        border-left: 1px solid black;\n        border-radius: 0 4px 4px 0;\n    }\n"]);return Y=function(){return n},n}var Z=v.a.form(Y());function $(){var n=Object(x.a)(["\n    width: 100%;\n    height: 100%;\n    padding: 20px;\n    margin-top: 40px;\n    background: #111;\n    display: flex;\n    flex-direction: column;\n    overflow-y: scroll;\n"]);return $=function(){return n},n}var _=v.a.div($()),nn=function(n){var e=n.socketClient,t=Object(a.useState)(""),o=Object(d.a)(t,2),c=o[0],i=o[1],u=Object(a.useState)([]),l=Object(d.a)(u,2),s=l[0],p=l[1],f=Object(a.useRef)(null),h=Object(a.useContext)(g),b=null===h||void 0===h?void 0:h.user;function x(n){null===n||void 0===n||n.preventDefault(),e.emit("message",{content:c,author:null===h||void 0===h?void 0:h.user}),i("")}return Object(a.useEffect)((function(){e.on("connected",(function(){e.emit("register",{username:b})})),e.on("message",(function(n){!function(n){p((function(e){return[].concat(Object(I.a)(e),[n])}))}({content:n.content,fromUser:n.author===(null===h||void 0===h?void 0:h.user),author:n.author===(null===h||void 0===h?void 0:h.user)?void 0:n.author})}))}),[]),Object(a.useEffect)((function(){f.current&&(f.current.scrollTop=f.current.scrollHeight)})),r.a.createElement(r.a.Fragment,null,r.a.createElement(_,{ref:f},s.map((function(n,e){return r.a.createElement(X,{key:e,fromUser:n.fromUser,content:n.content,author:n.author})}))),r.a.createElement(Z,{onSubmit:x},r.a.createElement(M.a,{id:"message-text",minRows:1,maxRows:5,onChange:function(n){i(n.target.value)},onKeyDown:function(n){"Enter"===n.key&&(n.shiftKey||(n.preventDefault(),x()))},value:c}),r.a.createElement("button",{type:"submit"},r.a.createElement(m.d,null))))},en=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(O,{justifyContent:"center"},r.a.createElement("h1",null,"Chat Global")),r.a.createElement(nn,{socketClient:H()("http://25.42.11.72:25565/")}))},tn=function(){return r.a.createElement(p.a,null,r.a.createElement(f.a,{component:W}),r.a.createElement(f.c,null,r.a.createElement(f.a,{path:"/",component:k,exact:!0}),r.a.createElement(f.a,{path:"/login",component:A}),r.a.createElement(f.a,{path:"/signup",component:T}),r.a.createElement(f.a,{path:["/chat","/chat/global"],component:en})))};function an(){var n=Object(x.a)(["\n    max-height: 20vh;\n    max-width: 40vw;\n    animation: "," 1s linear infinite;\n"]);return an=function(){return n},n}function rn(){var n=Object(x.a)(["\n    from {\n        transform: rotate(0deg);\n    }\n    \n    to {\n        transform: rotate(360deg);\n    }\n"]);return rn=function(){return n},n}var on=Object(v.b)(rn()),cn=v.a.img(an(),on),un=t(65),ln=t.n(un),sn=function(){return r.a.createElement(cn,{src:ln.a})};t(128);var dn=function(){var n=Object(a.useState)(),e=Object(d.a)(n,2),t=e[0],o=e[1];Object(a.useEffect)((function(){try{Object(s.a)(l.a.mark((function n(){var e;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,b.get("/logged");case 2:e=n.sent,o(e.data);case 4:case"end":return n.stop()}}),n)})))()}catch(n){}}),[]);var c=t?Object(i.a)({changeValue:function(n){o(n)}},t):void 0;return c?r.a.createElement(g.Provider,{value:c},r.a.createElement(tn,null)):r.a.createElement(sn,null)};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(dn,null)),document.getElementById("root"))},65:function(n,e,t){n.exports=t.p+"static/media/loading.e3c77b9e.png"},69:function(n,e,t){n.exports=t(129)}},[[69,1,2]]]);
//# sourceMappingURL=main.6419b88f.chunk.js.map